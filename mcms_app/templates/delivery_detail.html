{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block title %}Delivery Details: {{ delivery.delivery_reference }}{% endblock %}

{% block content %}
<div class="content">
    {# Modern Header #}
    <div class="page-header-modern">
        <div class="header-content">
            <div class="header-icon" style="background: linear-gradient(135deg, #34d399, #059669);"> {# Emerald Green for Suppliers #}
                <svg fill="#ffffff" height="40px" width="40px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <g> <path d="M498.837,342.968l-40.279-16.7l-10.784-73.363c-1.539-10.471-10.523-18.231-21.107-18.231H384v-85.342 c0-11.782-9.551-21.333-21.333-21.333H339.81C329.459,55.628,267.236,0,192,0S54.542,55.628,44.19,128H21.333 C9.551,128,0,137.551,0,149.333v192c0,0.001,0,0.003,0,0.004s0,0.003,0,0.004v106.667c0,11.782,9.551,21.333,21.333,21.333 h46.323C76.444,494.196,100.131,512,128,512s51.556-17.804,60.343-42.658h135.314C332.444,494.196,356.131,512,384,512 c27.869,0,51.556-17.804,60.343-42.658h46.323c11.782,0,21.333-9.551,21.333-21.333v-85.333 C512,354.049,506.805,346.272,498.837,342.968z M192,42.667c58.917,0,106.667,47.75,106.667,106.667 C298.667,208.25,250.917,256,192,256S85.333,208.25,85.333,149.333C85.333,90.417,133.083,42.667,192,42.667z M42.667,170.667 h1.512c0.036,0.254,0.08,0.506,0.118,0.76c0.076,0.512,0.156,1.022,0.237,1.532c0.108,0.677,0.219,1.353,0.336,2.027 c0.088,0.511,0.179,1.021,0.273,1.53c0.124,0.673,0.253,1.344,0.386,2.015c0.099,0.5,0.199,1,0.303,1.499 c0.142,0.68,0.291,1.357,0.443,2.034c0.108,0.484,0.215,0.969,0.328,1.451c0.164,0.699,0.336,1.394,0.51,2.089 c0.113,0.453,0.222,0.906,0.339,1.357c0.198,0.762,0.407,1.519,0.616,2.276c0.105,0.378,0.204,0.759,0.311,1.136 c0.307,1.077,0.626,2.149,0.957,3.216c0.017,0.054,0.032,0.109,0.049,0.162c0.349,1.121,0.712,2.237,1.086,3.346 c0.12,0.354,0.247,0.705,0.369,1.058c0.26,0.752,0.521,1.504,0.793,2.251c0.156,0.428,0.319,0.852,0.478,1.278 c0.25,0.668,0.501,1.336,0.76,1.999c0.176,0.451,0.358,0.898,0.538,1.346c0.255,0.634,0.511,1.267,0.775,1.896 c0.192,0.458,0.388,0.914,0.584,1.37c0.265,0.615,0.532,1.229,0.805,1.84c0.204,0.457,0.411,0.913,0.619,1.368 c0.277,0.605,0.559,1.207,0.844,1.807c0.214,0.451,0.43,0.902,0.648,1.351c0.293,0.602,0.592,1.2,0.893,1.797 c0.221,0.439,0.441,0.878,0.667,1.314c0.315,0.61,0.637,1.216,0.961,1.821c0.221,0.414,0.44,0.829,0.665,1.241 c0.352,0.645,0.714,1.284,1.075,1.923c0.206,0.365,0.409,0.732,0.618,1.095c0.442,0.766,0.894,1.524,1.349,2.281 c0.138,0.23,0.272,0.464,0.412,0.694c0.598,0.983,1.207,1.959,1.827,2.927c0.161,0.252,0.329,0.5,0.492,0.751 c0.463,0.713,0.927,1.425,1.402,2.13c0.239,0.355,0.484,0.705,0.726,1.057c0.409,0.596,0.817,1.191,1.234,1.781 c0.271,0.383,0.547,0.761,0.821,1.141c0.398,0.552,0.797,1.102,1.202,1.648c0.291,0.392,0.587,0.781,0.882,1.171 c0.4,0.528,0.801,1.054,1.208,1.576c0.304,0.39,0.61,0.778,0.918,1.164c0.41,0.515,0.822,1.028,1.238,1.538 c0.313,0.383,0.627,0.765,0.944,1.146c0.423,0.507,0.85,1.011,1.279,1.513c0.318,0.371,0.636,0.743,0.957,1.111 c0.442,0.507,0.89,1.009,1.339,1.509c0.317,0.354,0.633,0.709,0.954,1.06c0.475,0.52,0.957,1.033,1.439,1.546 c0.302,0.321,0.601,0.645,0.906,0.964c0.549,0.574,1.106,1.139,1.664,1.704c0.247,0.25,0.49,0.504,0.739,0.753 c0.81,0.809,1.629,1.609,2.457,2.399c0.1,0.095,0.203,0.188,0.303,0.283c0.73,0.693,1.466,1.38,2.21,2.058 c0.292,0.266,0.59,0.526,0.884,0.79c0.559,0.501,1.118,1.002,1.684,1.494c0.344,0.299,0.693,0.593,1.04,0.89 c0.525,0.449,1.051,0.897,1.582,1.338c0.371,0.308,0.746,0.612,1.12,0.916c0.516,0.42,1.033,0.839,1.554,1.252 c0.388,0.307,0.779,0.612,1.17,0.915c0.518,0.402,1.037,0.801,1.561,1.196c0.398,0.301,0.798,0.6,1.199,0.896 c0.528,0.391,1.059,0.778,1.593,1.161c0.401,0.289,0.802,0.577,1.206,0.861c0.546,0.385,1.096,0.764,1.647,1.141 c0.399,0.273,0.797,0.547,1.198,0.817c0.574,0.385,1.152,0.762,1.731,1.14c0.386,0.251,0.77,0.505,1.158,0.753 c0.63,0.402,1.267,0.795,1.903,1.188c0.343,0.212,0.683,0.428,1.028,0.637c0.835,0.506,1.677,1.002,2.523,1.492 c0.151,0.088,0.3,0.179,0.451,0.266c0.999,0.574,2.005,1.136,3.018,1.687c0.307,0.167,0.619,0.327,0.927,0.493 c0.71,0.38,1.42,0.759,2.137,1.127c0.395,0.203,0.794,0.399,1.191,0.599c0.637,0.32,1.274,0.64,1.916,0.952 c0.431,0.209,0.865,0.412,1.299,0.617c0.616,0.291,1.232,0.582,1.852,0.865c0.45,0.206,0.903,0.406,1.355,0.608 c0.612,0.272,1.225,0.541,1.841,0.805c0.46,0.197,0.922,0.392,1.385,0.584c0.616,0.257,1.234,0.509,1.854,0.758 c0.467,0.187,0.935,0.373,1.404,0.556c0.625,0.243,1.252,0.48,1.881,0.715c0.468,0.175,0.936,0.35,1.406,0.52 c0.646,0.234,1.295,0.46,1.945,0.685c0.457,0.158,0.913,0.319,1.372,0.473c0.691,0.232,1.386,0.454,2.081,0.675 c0.422,0.135,0.843,0.274,1.267,0.405c0.815,0.252,1.635,0.492,2.456,0.731c0.309,0.09,0.615,0.185,0.924,0.272 c1.133,0.321,2.271,0.629,3.415,0.924c0.24,0.062,0.482,0.117,0.721,0.177c0.905,0.228,1.811,0.453,2.723,0.664 c0.418,0.097,0.838,0.186,1.257,0.279c0.739,0.165,1.478,0.329,2.221,0.483c0.472,0.098,0.946,0.188,1.419,0.281 c0.696,0.137,1.392,0.273,2.091,0.401c0.498,0.091,0.998,0.176,1.498,0.261c0.681,0.117,1.363,0.231,2.047,0.339 c0.511,0.08,1.023,0.157,1.536,0.232c0.68,0.1,1.361,0.195,2.044,0.286c0.516,0.068,1.033,0.135,1.55,0.198 c0.687,0.084,1.376,0.162,2.066,0.236c0.516,0.056,1.032,0.111,1.549,0.161c0.703,0.068,1.408,0.129,2.114,0.188 c0.506,0.042,1.011,0.086,1.519,0.123c0.735,0.054,1.473,0.097,2.211,0.14c0.482,0.028,0.963,0.06,1.446,0.083 c0.816,0.04,1.634,0.067,2.453,0.093c0.407,0.013,0.812,0.032,1.219,0.042c1.228,0.03,2.459,0.047,3.695,0.047 s2.467-0.017,3.695-0.047c0.407-0.01,0.813-0.029,1.219-0.042c0.819-0.026,1.638-0.054,2.453-0.093 c0.483-0.023,0.964-0.055,1.446-0.083c0.738-0.043,1.476-0.087,2.211-0.14c0.507-0.037,1.013-0.081,1.519-0.123 c0.706-0.059,1.411-0.119,2.114-0.188c0.517-0.05,1.033-0.106,1.549-0.161c0.69-0.074,1.379-0.152,2.066-0.236 c0.518-0.063,1.034-0.129,1.55-0.198c0.683-0.091,1.364-0.186,2.044-0.286c0.513-0.075,1.025-0.151,1.536-0.232 c0.684-0.108,1.366-0.222,2.047-0.339c0.5-0.086,1-0.171,1.498-0.261c0.699-0.127,1.395-0.263,2.091-0.401 c0.473-0.093,0.948-0.184,1.419-0.281c0.743-0.154,1.482-0.318,2.221-0.483c0.419-0.094,0.84-0.182,1.257-0.279 c0.911-0.212,1.818-0.436,2.723-0.664c0.24-0.061,0.482-0.116,0.721-0.177c1.144-0.295,2.282-0.603,3.415-0.924 c0.309-0.088,0.615-0.183,0.924-0.272c0.821-0.238,1.641-0.479,2.456-0.731c0.424-0.131,0.845-0.27,1.267-0.405 c0.695-0.222,1.39-0.444,2.081-0.675c0.459-0.154,0.915-0.314,1.372-0.473c0.65-0.225,1.299-0.451,1.945-0.685 c0.47-0.17,0.938-0.345,1.406-0.52c0.629-0.235,1.256-0.472,1.881-0.715c0.469-0.183,0.937-0.368,1.404-0.556 c0.62-0.249,1.238-0.501,1.854-0.758c0.463-0.193,0.925-0.387,1.385-0.584c0.616-0.264,1.229-0.533,1.841-0.805 c0.452-0.201,0.905-0.402,1.355-0.608c0.62-0.283,1.237-0.573,1.852-0.865c0.433-0.205,0.868-0.408,1.299-0.617 c0.642-0.312,1.279-0.631,1.916-0.952c0.397-0.2,0.796-0.396,1.191-0.599c0.717-0.369,1.427-0.747,2.137-1.127 c0.309-0.165,0.62-0.325,0.927-0.493c1.013-0.551,2.02-1.113,3.018-1.687c0.151-0.087,0.3-0.178,0.451-0.266 c0.846-0.49,1.688-0.986,2.523-1.492c0.345-0.209,0.685-0.425,1.028-0.637c0.637-0.393,1.273-0.786,1.903-1.188 c0.388-0.248,0.772-0.501,1.158-0.753c0.579-0.377,1.158-0.755,1.731-1.14c0.401-0.269,0.799-0.543,1.198-0.817 c0.551-0.378,1.101-0.757,1.647-1.141c0.404-0.285,0.805-0.573,1.206-0.861c0.533-0.384,1.065-0.771,1.593-1.161 c0.401-0.297,0.801-0.596,1.199-0.896c0.523-0.395,1.043-0.794,1.561-1.196c0.391-0.304,0.782-0.608,1.17-0.915 c0.522-0.413,1.039-0.832,1.554-1.252c0.374-0.305,0.749-0.608,1.12-0.917c0.53-0.44,1.054-0.887,1.578-1.334 c0.349-0.298,0.7-0.593,1.045-0.894c0.565-0.491,1.122-0.991,1.68-1.491c0.295-0.264,0.593-0.525,0.886-0.792 c0.744-0.678,1.48-1.365,2.21-2.058c0.1-0.095,0.203-0.188,0.303-0.283c0.828-0.79,1.646-1.589,2.456-2.398 c0.252-0.252,0.498-0.509,0.748-0.762c0.555-0.562,1.11-1.125,1.656-1.696c0.305-0.319,0.605-0.644,0.908-0.966 c0.481-0.512,0.962-1.024,1.436-1.542c0.322-0.353,0.64-0.709,0.959-1.065c0.448-0.5,0.895-1,1.336-1.505 c0.322-0.368,0.639-0.74,0.957-1.112c0.429-0.502,0.856-1.005,1.279-1.513c0.317-0.38,0.631-0.763,0.945-1.146 c0.415-0.509,0.827-1.02,1.236-1.534c0.309-0.389,0.617-0.778,0.922-1.169c0.406-0.521,0.806-1.046,1.205-1.572 c0.295-0.39,0.591-0.779,0.883-1.172c0.404-0.544,0.802-1.094,1.199-1.643c0.276-0.382,0.553-0.763,0.826-1.148 c0.416-0.588,0.823-1.182,1.231-1.776c0.242-0.354,0.489-0.704,0.728-1.06c0.475-0.705,0.939-1.417,1.402-2.13 c0.163-0.251,0.331-0.499,0.492-0.751c0.619-0.967,1.228-1.942,1.826-2.925c0.145-0.238,0.283-0.479,0.426-0.718 c0.45-0.749,0.897-1.499,1.334-2.257c0.212-0.367,0.417-0.739,0.626-1.108c0.359-0.635,0.717-1.269,1.067-1.909 c0.227-0.415,0.447-0.834,0.67-1.251c0.321-0.602,0.642-1.204,0.955-1.81c0.227-0.439,0.449-0.881,0.671-1.323 c0.299-0.594,0.597-1.189,0.888-1.788c0.22-0.452,0.437-0.905,0.652-1.359c0.284-0.597,0.564-1.196,0.839-1.798 c0.21-0.458,0.418-0.916,0.623-1.376c0.271-0.608,0.537-1.219,0.801-1.831c0.197-0.459,0.394-0.917,0.587-1.378 c0.262-0.626,0.517-1.255,0.77-1.886c0.182-0.452,0.365-0.903,0.542-1.357c0.258-0.659,0.507-1.322,0.755-1.986 c0.161-0.43,0.326-0.859,0.483-1.291c0.269-0.74,0.528-1.485,0.786-2.231c0.125-0.36,0.254-0.717,0.376-1.078 c0.374-1.108,0.736-2.222,1.085-3.342c0.022-0.07,0.041-0.141,0.063-0.21c0.325-1.051,0.64-2.107,0.942-3.168 c0.109-0.383,0.21-0.77,0.317-1.155c0.208-0.751,0.415-1.502,0.611-2.257c0.118-0.455,0.229-0.914,0.343-1.371 c0.172-0.69,0.344-1.381,0.506-2.075c0.114-0.486,0.221-0.974,0.33-1.461c0.15-0.673,0.299-1.346,0.44-2.023 c0.105-0.502,0.205-1.005,0.305-1.508c0.132-0.667,0.261-1.334,0.384-2.004c0.094-0.512,0.186-1.025,0.275-1.539 c0.116-0.671,0.227-1.343,0.334-2.016c0.082-0.513,0.162-1.027,0.238-1.541c0.037-0.253,0.081-0.503,0.117-0.756h1.512v85.342 v64.251l-298.667-0.243V170.667z M128,469.333c-11.79,0-21.331-9.54-21.333-21.329c0.002-11.789,9.543-21.329,21.333-21.329 s21.331,9.54,21.333,21.329C149.331,459.793,139.79,469.333,128,469.333z M384,469.333c-11.79,0-21.331-9.54-21.333-21.329 c0.002-11.789,9.543-21.329,21.333-21.329s21.331,9.54,21.333,21.329C405.331,459.793,395.79,469.333,384,469.333z M469.333,426.675h-24.973c-0.037-0.105-0.08-0.207-0.117-0.312c-0.133-0.369-0.274-0.734-0.413-1.1 c-0.198-0.52-0.401-1.037-0.611-1.551c-0.156-0.381-0.315-0.761-0.479-1.139c-0.222-0.513-0.455-1.021-0.69-1.527 c-0.162-0.349-0.319-0.7-0.487-1.045c-0.382-0.784-0.778-1.56-1.191-2.326c-0.182-0.337-0.375-0.666-0.563-0.999 c-0.267-0.475-0.536-0.949-0.815-1.417c-0.225-0.378-0.457-0.75-0.69-1.123c-0.261-0.417-0.526-0.831-0.796-1.242 c-0.245-0.373-0.491-0.746-0.744-1.113c-0.287-0.418-0.584-0.829-0.881-1.24c-0.246-0.34-0.486-0.685-0.739-1.02 c-0.505-0.67-1.023-1.328-1.554-1.977c-0.289-0.354-0.59-0.699-0.886-1.047c-0.299-0.35-0.598-0.7-0.904-1.044 c-0.318-0.357-0.641-0.709-0.967-1.059c-0.301-0.323-0.607-0.642-0.915-0.959c-0.336-0.346-0.671-0.692-1.014-1.03 c-0.323-0.318-0.654-0.627-0.984-0.938c-0.605-0.572-1.222-1.131-1.849-1.679c-0.339-0.296-0.675-0.595-1.02-0.884 c-0.384-0.321-0.776-0.633-1.168-0.945c-0.323-0.258-0.648-0.515-0.976-0.767c-0.404-0.31-0.81-0.614-1.221-0.914 c-0.328-0.239-0.66-0.473-0.993-0.706c-0.421-0.295-0.841-0.592-1.269-0.877c-0.322-0.214-0.651-0.417-0.976-0.626 c-0.803-0.514-1.617-1.01-2.444-1.488c-0.334-0.193-0.666-0.389-1.003-0.577c-0.463-0.257-0.931-0.503-1.401-0.748 c-0.345-0.18-0.692-0.359-1.041-0.533c-0.477-0.238-0.955-0.472-1.439-0.699c-0.345-0.162-0.695-0.316-1.043-0.471 c-1.734-0.775-3.508-1.473-5.32-2.094c-0.359-0.123-0.717-0.248-1.079-0.365c-0.519-0.168-1.042-0.325-1.567-0.48 c-0.371-0.109-0.743-0.214-1.117-0.317c-0.531-0.146-1.063-0.289-1.599-0.422c-0.362-0.089-0.728-0.169-1.093-0.252 c-1.066-0.243-2.142-0.46-3.228-0.649c-0.298-0.052-0.593-0.111-0.892-0.159c-0.555-0.089-1.115-0.161-1.674-0.235 c-0.391-0.052-0.781-0.104-1.174-0.149c-0.556-0.063-1.115-0.118-1.675-0.168c-0.4-0.035-0.801-0.064-1.203-0.091 c-0.565-0.039-1.13-0.078-1.699-0.102c-0.384-0.016-0.771-0.02-1.157-0.029c-0.533-0.013-1.062-0.04-1.598-0.04 s-1.065,0.027-1.598,0.04c-0.386,0.009-0.773,0.013-1.157,0.029c-0.569,0.024-1.134,0.063-1.699,0.102 c-0.402,0.028-0.804,0.056-1.204,0.091c-0.56,0.049-1.119,0.104-1.675,0.168c-0.393,0.045-0.784,0.097-1.175,0.149 c-0.559,0.074-1.119,0.146-1.673,0.235c-0.299,0.048-0.595,0.107-0.893,0.159c-1.085,0.189-2.161,0.406-3.227,0.649 c-0.365,0.083-0.731,0.163-1.093,0.252c-0.536,0.132-1.068,0.276-1.598,0.422c-0.374,0.103-0.747,0.208-1.118,0.317 c-0.525,0.154-1.048,0.312-1.567,0.48c-0.363,0.117-0.721,0.242-1.081,0.366c-1.811,0.621-3.585,1.319-5.319,2.094 c-0.349,0.156-0.698,0.31-1.043,0.471c-0.483,0.226-0.961,0.461-1.438,0.698c-0.349,0.174-0.696,0.353-1.042,0.534 c-0.469,0.245-0.938,0.491-1.4,0.748c-0.338,0.188-0.671,0.384-1.005,0.578c-0.823,0.476-1.634,0.97-2.434,1.482 c-0.329,0.21-0.661,0.416-0.986,0.632c-0.428,0.285-0.846,0.581-1.267,0.875c-0.333,0.233-0.666,0.467-0.994,0.707 c-0.411,0.3-0.818,0.605-1.221,0.914c-0.329,0.252-0.653,0.509-0.976,0.767c-0.392,0.312-0.784,0.624-1.168,0.945 c-0.345,0.289-0.682,0.588-1.021,0.884c-0.626,0.547-1.241,1.105-1.846,1.676c-0.331,0.312-0.663,0.622-0.988,0.942 c-0.343,0.338-0.677,0.683-1.013,1.029c-0.308,0.317-0.614,0.637-0.916,0.96c-0.326,0.349-0.648,0.701-0.966,1.058 c-0.307,0.345-0.608,0.696-0.908,1.048c-0.296,0.347-0.595,0.69-0.883,1.043c-0.53,0.649-1.049,1.308-1.554,1.978 c-0.252,0.335-0.493,0.68-0.739,1.02c-0.297,0.411-0.594,0.821-0.881,1.24c-0.253,0.368-0.499,0.74-0.744,1.113 c-0.27,0.411-0.535,0.824-0.796,1.242c-0.233,0.373-0.465,0.745-0.69,1.123c-0.279,0.467-0.547,0.942-0.815,1.417 c-0.188,0.333-0.381,0.662-0.563,0.999c-0.413,0.766-0.809,1.542-1.191,2.326c-0.168,0.345-0.325,0.696-0.487,1.045 c-0.235,0.506-0.468,1.014-0.69,1.527c-0.164,0.377-0.322,0.757-0.478,1.139c-0.211,0.514-0.414,1.033-0.612,1.554 c-0.139,0.365-0.279,0.728-0.411,1.096c-0.038,0.105-0.08,0.208-0.118,0.314H188.361c-0.037-0.105-0.08-0.207-0.117-0.312 c-0.133-0.369-0.274-0.734-0.413-1.1c-0.198-0.52-0.401-1.037-0.611-1.551c-0.156-0.381-0.315-0.761-0.479-1.139 c-0.222-0.513-0.455-1.021-0.69-1.527c-0.162-0.349-0.319-0.7-0.487-1.045c-0.382-0.784-0.778-1.56-1.191-2.326 c-0.182-0.337-0.375-0.666-0.563-0.999c-0.267-0.475-0.536-0.949-0.815-1.417c-0.225-0.378-0.457-0.75-0.69-1.123 c-0.261-0.417-0.526-0.831-0.796-1.242c-0.245-0.373-0.491-0.746-0.744-1.113c-0.287-0.418-0.584-0.829-0.881-1.24 c-0.246-0.34-0.486-0.685-0.739-1.02c-0.505-0.67-1.023-1.328-1.554-1.977c-0.289-0.354-0.59-0.699-0.886-1.047 c-0.299-0.35-0.598-0.7-0.904-1.043c-0.319-0.358-0.642-0.71-0.969-1.061c-0.3-0.323-0.605-0.641-0.912-0.957 c-0.336-0.346-0.672-0.693-1.016-1.031c-0.322-0.317-0.653-0.625-0.982-0.936c-0.607-0.573-1.226-1.135-1.855-1.684 c-0.338-0.295-0.673-0.593-1.017-0.88c-0.384-0.321-0.776-0.633-1.168-0.945c-0.323-0.258-0.648-0.515-0.976-0.767 c-0.404-0.31-0.81-0.614-1.221-0.914c-0.328-0.239-0.66-0.473-0.993-0.706c-0.421-0.295-0.841-0.592-1.269-0.877 c-0.322-0.214-0.651-0.417-0.976-0.626c-0.803-0.514-1.617-1.01-2.444-1.488c-0.334-0.193-0.666-0.389-1.003-0.577 c-0.463-0.257-0.931-0.503-1.401-0.748c-0.345-0.18-0.692-0.359-1.041-0.533c-0.477-0.238-0.956-0.473-1.44-0.699 c-0.344-0.161-0.693-0.315-1.04-0.47c-1.735-0.775-3.51-1.474-5.322-2.095c-0.359-0.123-0.717-0.248-1.079-0.365 c-0.519-0.168-1.042-0.325-1.567-0.48c-0.371-0.109-0.743-0.214-1.117-0.317c-0.531-0.146-1.063-0.289-1.599-0.422 c-0.362-0.089-0.728-0.169-1.092-0.252c-1.067-0.244-2.144-0.46-3.23-0.65c-0.297-0.052-0.592-0.111-0.89-0.159 c-0.555-0.089-1.115-0.161-1.674-0.235c-0.391-0.052-0.781-0.104-1.174-0.149c-0.556-0.063-1.115-0.118-1.675-0.168 c-0.4-0.035-0.801-0.064-1.203-0.091c-0.565-0.039-1.13-0.078-1.699-0.102c-0.384-0.016-0.771-0.02-1.157-0.029 c-0.533-0.013-1.062-0.04-1.598-0.04s-1.065,0.027-1.598,0.04c-0.386,0.009-0.773,0.013-1.157,0.029 c-0.569,0.024-1.134,0.063-1.699,0.102c-0.402,0.028-0.803,0.056-1.203,0.091c-0.561,0.049-1.119,0.104-1.675,0.168 c-0.393,0.045-0.783,0.097-1.174,0.149c-0.56,0.074-1.119,0.146-1.674,0.235c-0.299,0.048-0.593,0.107-0.89,0.159 c-1.087,0.189-2.163,0.406-3.23,0.65c-0.365,0.083-0.73,0.163-1.092,0.252c-0.536,0.132-1.068,0.276-1.599,0.422 c-0.374,0.103-0.746,0.208-1.117,0.317c-0.525,0.155-1.048,0.312-1.567,0.48c-0.362,0.117-0.72,0.242-1.079,0.365 c-1.812,0.621-3.587,1.32-5.322,2.095c-0.348,0.155-0.696,0.309-1.04,0.47c-0.484,0.227-0.963,0.461-1.44,0.699 c-0.349,0.174-0.695,0.352-1.041,0.533c-0.47,0.245-0.938,0.492-1.401,0.748c-0.338,0.187-0.669,0.384-1.003,0.577 c-0.827,0.478-1.641,0.974-2.444,1.488c-0.326,0.208-0.655,0.412-0.976,0.626c-0.428,0.285-0.848,0.582-1.269,0.877 c-0.333,0.233-0.665,0.466-0.993,0.706c-0.411,0.3-0.818,0.605-1.221,0.914c-0.329,0.252-0.653,0.509-0.976,0.767 c-0.392,0.313-0.784,0.624-1.168,0.945c-0.344,0.288-0.679,0.586-1.017,0.88c-0.629,0.55-1.248,1.111-1.855,1.684 c-0.329,0.31-0.659,0.619-0.982,0.936c-0.344,0.339-0.679,0.685-1.016,1.031c-0.307,0.316-0.612,0.634-0.912,0.957 c-0.326,0.35-0.65,0.703-0.969,1.061c-0.306,0.344-0.605,0.693-0.904,1.043c-0.297,0.348-0.597,0.693-0.886,1.047 c-0.53,0.649-1.049,1.307-1.554,1.977c-0.252,0.335-0.493,0.68-0.739,1.02c-0.297,0.411-0.594,0.821-0.881,1.24 c-0.253,0.368-0.499,0.74-0.744,1.113c-0.27,0.411-0.535,0.824-0.796,1.242c-0.233,0.373-0.465,0.745-0.69,1.123 c-0.279,0.467-0.547,0.942-0.815,1.417c-0.187,0.333-0.381,0.662-0.563,0.999c-0.413,0.766-0.809,1.542-1.191,2.326 c-0.168,0.345-0.325,0.696-0.487,1.045c-0.235,0.506-0.468,1.014-0.69,1.527c-0.164,0.378-0.322,0.758-0.479,1.139 c-0.211,0.513-0.414,1.031-0.611,1.551c-0.139,0.366-0.28,0.731-0.413,1.1c-0.038,0.105-0.08,0.207-0.117,0.312H42.667v-63.983 l319.983,0.26c11.789,0.01,21.351-9.544,21.351-21.333v-0.008v-64.269h24.24l9.864,67.103c1.091,7.425,6.004,13.73,12.936,16.604 l38.293,15.876V426.675z"></path> <path d="M176.915,207.085c9.519,9.519,25.368,7.95,32.835-3.251l51.2-76.8c6.536-9.803,3.886-23.049-5.917-29.584 c-9.803-6.536-23.049-3.886-29.584,5.917l-36.765,55.148l-15.733-15.733c-8.331-8.331-21.839-8.331-30.17,0 s-8.331,21.839,0,30.17L176.915,207.085z"></path> </g> </g> </g> </g></svg></div>
            <div class="header-text">
                <h1 class="page-title">Delivery Details</h1>
                <p class="page-subtitle">{{ delivery.delivery_reference|default:"New Delivery" }}</p>
            </div>
        </div>
        <div class="header-actions">
            <a href="{% url 'delivery_list' %}" class="btn-secondary-outline">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m12 19-7-7 7-7"/>
                    <path d="M19 12H5"/>
                </svg>
                Back to List
            </a>
        </div>
    </div>

    <div class="detail-container row">
        {# Main Information Card - Taking full width if no sidebar, or col-lg-8 if sidebar is used #}
        <div class="main-content col-lg-8 col-md-12">
            <div class="detail-card">
                <div class="card-header">
                    <div class="card-header-content pb-3">
                        <h2 class="card-title">Delivery Information</h2>
                        <div class="status-badge 
                            {% if delivery.is_cancelled %}status-cancelled
                            {% else %}status-active{% endif %}">
                            {% if delivery.is_cancelled %}Cancelled{% else %}Active{% endif %}
                        </div>
                    </div>
                </div>
                
                <div class="card-body">
                    <div class="detail-grid">
                        <div class="detail-group">
                            <div class="detail-item">
                                <span class="detail-label">Reference</span>
                                <span class="detail-value">{{ delivery.delivery_reference|default:"N/A" }}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Delivery Date</span>
                                <span class="detail-value">{{ delivery.delivery_date|date:"M d, Y" }}</span>
                            </div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-item">
                                <span class="detail-label">Associated Payment</span>
                                <span class="detail-value">
                                    <a href="{% if delivery.payment %}{% url 'payment_detail' pk=delivery.payment.pk %}{% endif %}">
                                        {{ delivery.payment.payment_reference|default:"N/A" }}
                                    </a>
                                </span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Supplier</span>
                                <span class="detail-value">
                                    <a href="{% if delivery.payment.supplier %}{% url 'supplier_detail' pk=delivery.payment.supplier.pk %}{% endif %}">
                                        {{ delivery.payment.supplier.name|default:"N/A" }}
                                    </a>
                                </span>
                            </div>
                        </div>
                        <div class="detail-item detail-item-full">
                            <span class="detail-label">Remarks</span>
                            <span class="detail-value">{{ delivery.remarks|default_if_none:"N/A"|linebreaksbr }}</span>
                        </div>
                        <div class="detail-item detail-item-full">
                            <span class="detail-label">Timestamps</span>
                            <span class="detail-value text-muted" style="font-size: 0.8rem;">
                                Recorded: {{ delivery.created_at|date:"M d, Y H:i"|default:"N/A" }}
                                {% if delivery.updated_at != delivery.created_at %}
                                    | Last Updated: {{ delivery.updated_at|date:"M d, Y H:i"|default:"N/A" }}
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            {# Delivered Items #}
            <div class="detail-card">
                <div class="card-header pb-3">
                    <h2 class="card-title">Delivered Items</h2>
                </div>
                <div class="card-body">
                    {% if delivery.delivery_items.all %}
                        <div class="table-responsive">
                            <table class="table table-hover modern-table">
                                <thead>
                                    <tr>
                                        <th>Motorcycle Model</th>
                                        <th class="text-end">Delivered Quantity</th>
                                        <th>Item Remarks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item in delivery.delivery_items.all %}
                                    <tr>
                                        <td>{{ item.motorcycle_model.name }}</td>
                                        <td class="text-end">{{ item.delivered_quantity|intcomma }}</td>
                                        <td>{{ item.delivery_remarks|default_if_none:"" }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="empty-state-small">
                            <p class="empty-text">No items were recorded for this delivery.</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            {# Action Buttons - No "Edit Delivery" typically, only "Cancel" #}
            <div class="action-bar">
                {% if not delivery.is_cancelled %}
                    <a href="{% url 'delivery_cancel' pk=delivery.pk %}" class="btn btn-danger"> {# Changed from delivery_cancel #}
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/>
                        </svg>
                        Cancel Delivery
                    </a>
                {% else %}
                    <button class="btn btn-danger" disabled>Already Cancelled</button>
                {% endif %}
            </div>
        </div>

        {# Right Sidebar - Optional: Could show details of the associated payment #}
        <div class="right-sidebar col-lg-4 d-none d-lg-block">
             <div class="sidebar-content">
                {% if delivery.payment %}
                <div class="detail-card">
                    <div class="card-header pb-3">
                        <h2 class="card-title">Associated Payment</h2>
                    </div>
                    <div class="card-body">
                        <div class="detail-item">
                            <span class="detail-label">Payment Reference</span>
                            <span class="detail-value"><a href="{% url 'payment_detail' pk=delivery.payment.pk %}">{{ delivery.payment.payment_reference }}</a></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Payment Date</span>
                            <span class="detail-value">{{ delivery.payment.payment_date|date:"M d, Y" }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Payment Amount</span>
                            <span class="detail-value">â‚¦{{ delivery.payment.amount_paid|floatformat:2|intcomma }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Payment Status</span>
                            <span class="detail-value">
                                <div class="status-badge 
                                    {% if delivery.payment.status == delivery.payment.COMPLETED %}status-completed
                                    {% elif delivery.payment.status == delivery.payment.ACTIVE %}status-active
                                    {% elif delivery.payment.status == delivery.payment.CANCELLED %}status-cancelled
                                    {% else %}status-inactive{% endif %}">
                                    {{ delivery.payment.get_status_display }}
                                </div>
                            </span>
                        </div>
                        <!-- <div class="mt-3">
                            <a href="{% url 'payment_detail' pk=delivery.payment.pk %}" class="btn btn-sm btn-secondary-outline w-100">View Full Payment</a>
                        </div> -->
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
:root {
    --primary-color: #f97316; /* Orange */
    --primary-hover: #ea580c;
    --success-color: #10b981; /* Green */
    --warning-color: #f59e0b; /* Amber */
    --danger-color: #ef4444;  /* Red */
    --info-color: #3b82f6;    /* Blue */
    --gray-50: #f9fafb; --gray-100: #f3f4f6; --gray-200: #e5e7eb; --gray-300: #d1d5db;
    --gray-400: #9ca3af; --gray-500: #6b7280; --gray-600: #4b5563; --gray-700: #374151;
    --gray-800: #1f2937; --gray-900: #111827;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --border-radius: 12px;
    --border-radius-lg: 16px;
}

/* Layout */
.content { max-width: 100%; margin: 0 auto; padding: 2rem 1rem; }
.page-header-modern { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding: 1.5rem 0; border-bottom: 1px solid var(--gray-200); }
.header-content { display: flex; align-items: center; gap: 1rem; }
.header-icon { 
    width: 56px; 
    height: 56px; 
    background: linear-gradient(135deg, var(--info-color), #e06363); 
    border-radius: var(--border-radius); 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    color: white; 
    box-shadow: var(--shadow-md); 
}
.header-text { display: flex; flex-direction: column; gap: 0.25rem; }
.page-title { font-size: 1.875rem; font-weight: 700; color: var(--gray-900); margin: 0; line-height: 1.2; }
.page-subtitle { font-size: 1.125rem; color: var(--gray-600); margin: 0; font-weight: 500; }
.header-actions .btn-secondary-outline { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem; border: 1px solid var(--gray-300); border-radius: var(--border-radius); background: white; color: var(--gray-700); text-decoration: none; font-size: 0.875rem; font-weight: 500; transition: all 0.2s ease; }
.header-actions .btn-secondary-outline:hover { background: var(--gray-50); border-color: var(--gray-400); }

.sidebar-content { padding-top: 0; }

/* Cards */
.detail-card { background: white; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-sm); border: 1px solid var(--gray-200); margin-bottom: 1.5rem; overflow: hidden; }
.detail-card:hover { box-shadow: var(--shadow-md); }
.card-header { padding: 1.5rem 1.5rem 0; border-bottom: none; }
.card-header-content { display: flex; justify-content: space-between; align-items: center; }
.card-title { font-size: 1.25rem; font-weight: 600; color: var(--gray-900); margin: 0; }
.card-body { padding: 1.5rem; padding-top: 1rem; }

/* Status Badges */
.status-badge { padding: 0.5rem 1rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.025em; display:inline-block; line-height:1; }
.status-active { background-color: #dcfce7; color: #166534; }
.status-cancelled { background-color: #fee2e2; color: #991b1b; }
.status-completed { background-color: #cffafe; color: #0891b2; } /* For payment status in sidebar */
.status-inactive { background-color: var(--gray-100); color: var(--gray-700); }


/* Detail Grid */
.detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem 2rem; }
.detail-group { display: flex; flex-direction: column; gap: 1rem; }
.detail-item { display: flex; flex-direction: column; gap: 1rem; }
.detail-label { font-size: 0.8rem; font-weight: 500; color: var(--gray-500); text-transform: uppercase; letter-spacing: 0.025em; }
.detail-value { font-size: 0.95rem; font-weight: 600; color: var(--gray-800); }
.detail-value a { color: var(--primary-color); text-decoration: none; }
.detail-value a:hover { text-decoration: underline; }
.detail-item-full { grid-column: 1 / -1; }


/* Table Styling */
.modern-table { width: 100%; margin-bottom: 1rem; color: var(--gray-700); border-collapse: collapse; }
.modern-table th, .modern-table td { padding: 0.75rem 1rem; vertical-align: middle; border-top: 1px solid var(--gray-200); font-size: 0.875rem; }
.modern-table thead th { vertical-align: bottom; border-bottom: 2px solid var(--gray-300); font-weight: 600; color: var(--gray-600); text-transform: uppercase; letter-spacing: 0.05em; background-color: var(--gray-50); }
.modern-table tbody tr:hover { background-color: var(--gray-50); }
.modern-table .text-end { text-align: right !important; }
.modern-table .text-center { text-align: center !important; }


/* Action Bar & Buttons */
.action-bar { display: flex; gap: 0.75rem; flex-wrap: wrap; padding: 1.5rem 0 0 0; /* No card styling */ }
.btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.65rem 1.25rem; border-radius: var(--border-radius); font-size: 0.875rem; font-weight: 600; text-decoration: none; border: none; cursor: pointer; transition: all 0.2s ease; box-shadow: var(--shadow-sm); }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-danger { background: var(--danger-color); color: white; }
.btn-danger:hover:not(:disabled) { background: #dc2626; box-shadow: var(--shadow-md); }
.btn-secondary-outline { 
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius);
    background: white;
    color: var(--gray-700);
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
}
.btn svg { vertical-align: middle; margin-right: 0.35em; width: 1em; height: 1em; }


/* Empty State Small */
.empty-state-small { text-align: center; padding: 1rem; }
.empty-text { color: var(--gray-500); font-size: 0.875rem; }

/* Responsive adjustments */
@media (max-width: 991.98px) { 
    .right-sidebar { margin-top: 1.5rem; }
    .content { padding-right: 1rem; } /* Reset padding when sidebar stacks */
}
@media (max-width: 768px) { /* From motorcycle_detail.html */
    .content { padding: 1rem; }
    .page-header-modern { flex-direction: column; gap: 1rem; align-items: stretch; }
    .header-content { justify-content: center; }
    .header-actions { display: flex; justify-content: center; }
    .detail-grid { grid-template-columns: 1fr; gap: 1rem; }
    .action-bar { flex-direction: column; }
    .btn { justify-content: center; }
}
</style>
{% endblock %}